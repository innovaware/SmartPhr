<div mat-dialog-title>
  <div class="container-fluid" >
    <div class="row">
      <div class="col">
        <h3>Ingresso</h3>
      </div>

      <div class="col">
        <button class="close-button" [mat-dialog-close]="true">Ã—
        </button>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <hr>
      </div>
    </div>
  </div>
</div>

<mat-dialog-content>
  <div class="container-fluid" >
    <div class="row">
      <div class="col">

        

        <mat-tab-group mat-align-tabs="start">

          <mat-tab label="Indumenti Consigliati">

            <div class="notPresent" style="margin-bottom: 10px;" *ngIf="!addingDocumentoIndumentiConsigliati && this.documentiIndumentiConsigliati?.length <= 0">
              <button mat-button class="button-insert" (click)="addDocumentoIndumentiConsigliati()">Aggiungi Documento</button>
            </div>

            <div class="container-flex" class="notPresent" style="margin-bottom: 10px;"
              *ngIf="addingDocumentoIndumentiConsigliati && !uploadingDocumentoIndumentiConsigliati">
              <div class="row">
                <div class="col">
                  <input type="file" (change)="uploadDocumentoIndumentiConsigliati($event)" accept=".pdf" *ngIf="!uploadingDocumentoIndumentiConsigliati">
                  <label *ngIf="uploadingDocumentoIndumentiConsigliati">Caricamento in corso ...</label>
                </div>
                <div class="col">
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <mat-form-field class="full" appearance="fill" style="width: 100%;">
                    <mat-label>Note</mat-label>
                    <input matInput placeholder="Inserisci delle note" [(ngModel)]="nuovoDocumentoIndumentiConsigliati.note">
                  </mat-form-field>
                </div>
                <div class="col-2">
                  <button mat-button class="button-insert" (click)="saveDocumento(nuovoDocumentoIndumentiConsigliati)">Salva</button>
                </div>
              </div>
            </div>

            <div>
              <div class="container-flex" style="margin: 20px 0px 20px 0px;" *ngIf="uploadingDocumentoIndumentiConsigliati">
                <div class="row">
                  <div class="col-1">
                    <mat-spinner [diameter]="24"></mat-spinner>
                  </div>
                  <div class="col">
                    <label>Caricamento in corso ...</label>
                  </div>
                </div>
              </div>
            </div>


            <div *ngIf="this.documentiIndumentiConsigliati?.length <= 0" class="notPresent">
              Nessuna documento presente
            </div>

            <table mat-table [dataSource]="DocumentIndumentiConsigliatiDataSource" class="mat-elevation-z8" style="width: 100%;" *ngIf="this.documentiIndumentiConsigliati?.length > 0">
              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef>
                </th>
                <td mat-cell *matCellDef="let row" style="text-align: right;">
                  <!-- <input type="file" (change)="uploadFattura($event)" accept=".pdf" *ngIf="!uploadingFattura">
                  <label *ngIf="uploadingFattura">Caricamento in corso ...</label> -->

                  <button mat-button (click)="showDocument(row)">
                    <img src="../../../assets/pdf.jpg" style="width: 26px;">
                  </button>

                  <button mat-button (click)="deleteDocumento(row)">
                    <img src="../../../assets/cestino.svg" style="width:26px">
                  </button>


                </td>
              </ng-container>

              <ng-container matColumnDef="namefile">
                <th mat-header-cell *matHeaderCellDef> Nome file </th>
                <td mat-cell *matCellDef="let element"> {{element.filename}} </td>
              </ng-container>

              <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef> Data Inserimento </th>
                <td mat-cell *matCellDef="let element"> {{element.dateupload | date: 'dd/MM/yyyy'}} </td>
              </ng-container>

              <ng-container matColumnDef="note">
                <th mat-header-cell *matHeaderCellDef> Note </th>
                <td mat-cell *matCellDef="let element"> {{element.note}} </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="DisplayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: DisplayedColumns;"></tr>
            </table>

            <div class="paginator-container">

              <mat-paginator #paginatorDocumentIndumentiConsigliati [pageSizeOptions]="[5]" showFirstLastButtons
                aria-label="Select page of periodic elements">
              </mat-paginator>
            </div>

          </mat-tab>





          <mat-tab label="Indumenti da integrare">

            <div class="notPresent" style="margin-bottom: 10px;" *ngIf="!addingDocumentoIndumenti && this.documentiIndumenti?.length <= 0">
              <button mat-button class="button-insert" (click)="addDocumentoIndumenti()">Aggiungi Documento</button>
            </div>

            <div class="container-flex" class="notPresent" style="margin-bottom: 10px;"
              *ngIf="addingDocumentoIndumenti && !uploadingDocumentoIndumenti">
              <div class="row">
                <div class="col">
                  <input type="file" (change)="uploadDocumentoIndumenti($event)" accept=".pdf" *ngIf="!uploadingDocumentoIndumenti">
                  <label *ngIf="uploadingDocumentoIndumenti">Caricamento in corso ...</label>
                </div>
                <div class="col">
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <mat-form-field class="full" appearance="fill" style="width: 100%;">
                    <mat-label>Note</mat-label>
                    <input matInput placeholder="Inserisci delle note" [(ngModel)]="nuovoDocumentoIndumenti.note">
                  </mat-form-field>
                </div>
                <div class="col-2">
                  <button mat-button class="button-insert" (click)="saveDocumentoIndumenti(nuovoDocumentoIndumenti)">Salva</button>
                </div>
              </div>
            </div>

            <div>
              <div class="container-flex" style="margin: 20px 0px 20px 0px;" *ngIf="uploadingDocumentoIndumenti">
                <div class="row">
                  <div class="col-1">
                    <mat-spinner [diameter]="24"></mat-spinner>
                  </div>
                  <div class="col">
                    <label>Caricamento in corso ...</label>
                  </div>
                </div>
              </div>
            </div>


            <div *ngIf="this.documentiIndumenti?.length <= 0" class="notPresent">
              Nessuna documento presente
            </div>

            <table mat-table [dataSource]="DocumentIndumentiDataSource" class="mat-elevation-z8" style="width: 100%;" *ngIf="this.documentiIndumenti?.length > 0">
              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef>
                </th>
                <td mat-cell *matCellDef="let row" style="text-align: right;">
                  <!-- <input type="file" (change)="uploadFattura($event)" accept=".pdf" *ngIf="!uploadingFattura">
                  <label *ngIf="uploadingFattura">Caricamento in corso ...</label> -->

                  <button mat-button (click)="showDocument(row)">
                    <img src="../../../assets/pdf.jpg" style="width: 26px;">
                  </button>

                  <button mat-button (click)="deleteDocumentoIndumenti(row)">
                    <img src="../../../assets/cestino.svg" style="width:26px">
                  </button>


                </td>
              </ng-container>

              <ng-container matColumnDef="namefile">
                <th mat-header-cell *matHeaderCellDef> Nome file </th>
                <td mat-cell *matCellDef="let element"> {{element.filename}} </td>
              </ng-container>

              <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef> Data Inserimento </th>
                <td mat-cell *matCellDef="let element"> {{element.dateupload | date: 'dd/MM/yyyy'}} </td>
              </ng-container>

              <ng-container matColumnDef="note">
                <th mat-header-cell *matHeaderCellDef> Note </th>
                <td mat-cell *matCellDef="let element"> {{element.note}} </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="DisplayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: DisplayedColumns;"></tr>
            </table>

            <div class="paginator-container">

              <mat-paginator #paginatorDocumentIndumenti [pageSizeOptions]="[5]" showFirstLastButtons
                aria-label="Select page of periodic elements">
              </mat-paginator>
            </div>

          </mat-tab>

          <mat-tab label="Gestione letti ">
            <app-parametri-vitali [id]=data.paziente._id [inLettura]=true></app-parametri-vitali>
            <!-- <app-parametri-vitali [id]=data.paziente._id [saveEvent]="saveParametriVitali" [inLettura]=true></app-parametri-vitali> -->
          </mat-tab>
         
          <mat-tab label="Controlli">
            <br>
              <label>Sanificazione Stanza.</label>
              <input type="checkbox" slot="end"  [(ngModel)]="ingresso.sanificazione"/>


              <br>
              <label>Sistemazione letto.</label>
              <input type="checkbox" slot="end"  [(ngModel)]="ingresso.sistemazione_letto"/>

              <br>
                <label>Trattamento igienico.</label>
                <input type="checkbox" slot="end"  [(ngModel)]="ingresso.trattamento_igienico"/>
                <br>

            <mat-form-field class="full" appearance="fill" style="width: 100%;">
              <mat-label>Armadio Indumenti</mat-label>
              <input matInput placeholder="Inserisci delle note" [(ngModel)]="ingresso.armadio">
            </mat-form-field>
          
            <button *ngIf="ingresso._id == null" mat-button (click)="saveIngresso()" class="button-insert">Salva</button>
            <button *ngIf="ingresso._id != null" mat-button (click)="updateIngresso()" class="button-insert">Salva</button>


            </mat-tab>



        </mat-tab-group>

      </div>
    </div>
  </div>
</mat-dialog-content>


<div mat-dialog-actions>
  <div class="bottom-actions">
  <button mat-button [mat-dialog-close]="true">Chiudi</button>
</div>
</div>
