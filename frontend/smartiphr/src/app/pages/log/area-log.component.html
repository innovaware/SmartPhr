<ng-container *ngIf="sa">
  <div class="containter pad">
    <div class="row">
      <div class="col">
        <h1 class="title">AREA LOG</h1>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <hr />
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col">
        <mat-form-field appearance="standard">
          <mat-label>Cerca</mat-label>
          <input matInput (keyup)="applyFilter($event)" placeholder="Cerca qui..." [(ngModel)]="inputSearchField">
        </mat-form-field>
      </div>
      <div class="col-1 right middle" style="width: fit-content;">
        <img src="../../../assets/clean.png" style="width:26px" (click)="cleanSearchField()">
      </div>
    </div>
    <br />
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 custom-table" style="width: 100%;">
      <!-- Colonna Data -->
      <ng-container matColumnDef="data">
        <th mat-header-cell *matHeaderCellDef class="center-column" style="width: 40%;"> Data Log </th>
        <td mat-cell *matCellDef="let element" class="center-column"> {{element.data | date: 'dd/MM/yyyy'}} </td>
      </ng-container>

      <!-- Colonna Count -->
      <ng-container matColumnDef="numLog">
        <th mat-header-cell *matHeaderCellDef class="center-column" style="width: 30%;"> Count </th>
        <td mat-cell *matCellDef="let element" class="center-column"> {{element.logList.length}} </td>
      </ng-container>

      <!-- Colonna Visualizza -->
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef class="center-column" style="width: 30%;"> Visualizza </th>
        <td mat-cell *matCellDef="let row" class="center-column">
          <button mat-button (click)="viewLog(row)">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
              <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0" />
              <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7" />
            </svg>
          </button>
        </td>
      </ng-container>

      <!-- Header e righe -->
      <tr mat-header-row *matHeaderRowDef="DisplayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: DisplayedColumns;"></tr>
    </table>


    <!-- Paginator -->
    <div>
      <mat-paginator #paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>

  </div>
</ng-container>

<ng-container *ngIf="!sa">
  <mat-card class="card-notfound">
    <mat-card-content>
      <img src="../../../assets/larinascitasrl.jpg">
      <h2>Non si hanno i permessi per visualizzare questa pagina</h2>
    </mat-card-content>
  </mat-card>
</ng-container>
